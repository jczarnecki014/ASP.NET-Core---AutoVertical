@using AutoVertical_Model.Models
@model List<Conversation>;


<div class="container">
    <div style="background-color:#f4f5fb" class="row p-4">
        <div class="col-lg-3">
            <div id="ConversationList" style="max-height:750px;" class="row overflow-auto">
                <div class="col-lg-12">
                    <nav class="navbar bg-body-tertiary">
                      <form class="container-fluid">
                        <div class="input-group">
                          <input type="text" class="form-control" placeholder="Username" aria-label="Username" aria-describedby="basic-addon1">
                          <span class="input-group-text" id="basic-addon1">
                              <i class="bi bi-search"></i>
                          </span>
                        </div>
                      </form>
                    </nav>
                </div>    
                    @for(int i=0; i<Model.Count(); i++)
                    {
                        if(i==0)
                        {
                            <div class="active conversationElements col-lg-12 mt-5" data-convId="@Model[i].Id">
                                <div class="conversationElements row" >
                                    <div class="col-3">
                                        <img class="rounded-circle p-2 img-fluid position-relative" src="@Model[i].RecipientUser.AvatarSrc" />
                                    </div>
                                    <div class="col-7 d-flex align-items-center">
                                        <span class="fw-bold">@Model[i].RecipientUser.Name @Model[i].RecipientUser.Surname</span>
                                    </div>
                                    <div class="col-1 d-flex align-items-center">
                                        <form asp-controller="Messages" asp-action="DeleteConversation" method="post">
                                            <input name="ConversationId" hidden value="@Model[i].Id" />
                                            <button class="btn p-0 m-0"><i class="bi bi-trash3 text-danger h4"></i></button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        }
                        else
                        {
                            <div class="conversationElements col-lg-12 mt-5" data-convId="@Model[i].Id">
                                <div class="row" >
                                    <div class="col-3">
                                        <img class="rounded-circle p-2 img-fluid position-relative" src="@Model[i].RecipientUser.AvatarSrc" />
                                    </div>
                                    <div class="col-7 d-flex align-items-center">
                                        <span class="fw-bold">@Model[i].RecipientUser.Name @Model[i].RecipientUser.Surname</span>
                                    </div>
                                   <div class="col-1 d-flex align-items-center">
                                        <form asp-controller="Messages" asp-action="DeleteConversation" method="post">
                                            <input name="ConversationId" hidden value="@Model[i].Id" />
                                            <button class="btn p-0 m-0"><i class="bi bi-trash3 text-danger h4"></i></button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                
            </div>
        </div>
        <div class="col-lg-9">
            <div class="row">
                <div class="col-lg-12 my-3">
                    To: <b>Jakub Czarnecki</b>
                </div>
                <hr />
                <div id="MessagesContainer" style="height:550px; overflow-y: auto;" class="col-lg-12 mx-3">
                    <!--  JavaScript  supply messages in this place using API  -->
                </div>
                <div class="col-lg-12 rounded">
                        <textarea id="messageTextArea"></textarea>
                        <div class="row d-flex justify-content-lg-end justify-content-center mt-3">
                            <div class="col-2 text-end m-0 p-0">
                                <button id="messageButton" class="btn btn-outline-secondary px-5">Send</button>
                            </div>
                        </div>
                </div>
            </div>

        </div>
    </div>
</div>